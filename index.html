<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <!--<link rel="stylesheet" href="/style.css">-->
  <link rel="stylesheet" href="/assets/css/basic.css">
  <link rel="stylesheet" href="/assets/css/modals.css">
  <link rel="stylesheet" href="/assets/css/nav.css">
  <link rel="stylesheet" href="/assets/css/dreamy.css">
  <link rel="stylesheet" href="/assets/css/canvas.css">
  <link rel="stylesheet" href="/assets/css/HUD.css">
  
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <script type="importmap">
    {
      "imports": {
        "kaplay": "https://cdn.skypack.dev/kaplay"
      }
    }
  </script>
  <title>CATastrophe2</title>
</head>

<body>

 <div id="stars"></div>
<div class="dreamy-overlay"></div>

<div class="content-wrapper">
  <div class="background-gradient"></div>
  <!--<div class="waves">
        <svg id="wave1" viewBox="0 0 3000 600" preserveAspectRatio="none">
          <path d="M0,350 Q500,150 1000,350 T2000,350 T3000,350 L3000,600 L0,600 Z" fill="#4b0082" opacity="0.9"/>
        </svg>
        <svg id="wave2" viewBox="0 0 3000 600" preserveAspectRatio="none">
          <path d="M0,380 Q500,200 1000,380 T2000,380 T3000,380 L3000,600 L0,600 Z" fill="#c71585" opacity="0.8"/>
        </svg>
        <svg id="wave3" viewBox="0 0 3000 600" preserveAspectRatio="none">
          <path d="M0,400 Q333,200 666,400 T1333,400 T2000,400 T2333,400 T2666,400 T3000,400 L3000,600 L0,600 Z" fill="#ff69b4" opacity="0.75"/>
        </svg>
        <svg id="wave4" viewBox="0 0 3000 600" preserveAspectRatio="none">
          <path d="M0,420 Q750,250 1500,420 T3000,420 L3000,600 L0,600 Z" fill="#db7093" opacity="0.7"/>
        </svg>
        <svg id="wave5" viewBox="0 0 3000 600" preserveAspectRatio="none">
          <path d="M0,300 Q250,150 500,300 T1000,300 T1500,300 T2000,300 T2500,300 T3000,300 L3000,600 L0,600 Z" fill="#ff69b4" opacity="0.5"/>
        </svg>
        <svg id="wave6" viewBox="0 0 3000 600" preserveAspectRatio="none">
          <path d="M0,250 Q600,100 1200,250 T2400,250 L3000,250 L3000,600 L0,600 Z" fill="#e066ff" opacity="0.4"/>
        </svg>
  </div>-->

  <nav class="navbar">
      <div class="nav-container">
        
        <div class="left-dropdown"><!-- LEFT DROPDOWN MENU -->
          <button class="menu-trigger" aria-label="Menu">
            <img src="/assets/images/Niels2.png" alt="Menu" class="home-icon">
          </button>

          <div class="left-menu">
            <a href="https://mkb0020.vercel.app/" class="menu-item">Home</a>
            <a href="https://mkb0020.github.io/" class="menu-item">Javascript Projects</a>
            <a href="https://mkb0020.github.io/Toolkit.html" class="menu-item">Schr√∂dinger's Toolbox</a>
            <a href="https://mkb0020.onrender.com/resume" class="menu-item">Resume</a>
            <!--<a href="https://mkb0020.onrender.com/contact" class="menu-item">Contact</a>-->
            <a href="https://mkb0020.vercel.app/comments" class="menu-item">Guestbook</a>
            <a href="https://mkb0020.vercel.app/game-testing" class="menu-item">CATastrophe 2 Feedback</a>

            <div class="social-links">
              <a href="https://www.youtube.com/@mkb0020" target="_blank" aria-label="YouTube">
                <img src="/assets/images/icons/youtube-icon.png" alt="YouTube" class="social-icon">
              </a>
            
              <a href="https://www.linkedin.com/in/mkb0020/" target="_blank" aria-label="LinkedIn">
                <img src="/assets/images/icons/linkedin-icon.png" alt="LinkedIn" class="social-icon">
              </a>

              <a href="https://mkb0020.github.io/MKLambda.html" target="_blank" aria-label="Github">
                <img src="/assets/images/icons/music-icon.png" alt="Github" class="social-icon">
              </a>

              <a href="https://github.com/mkb0020" target="_blank" aria-label="GitHub">
                <img src="/assets/images/icons/github-icon.png" alt="GitHub" class="social-icon">
              </a>

              <a href="https://mkb0020.itch.io" target="_blank" aria-label="Itch.io">
                <img src="/assets/images/icons/itchio-icon.png" alt="Itch.io" class="social-icon">
              </a>
            </div>
          </div>
        </div>
<div class="hud-stats-inner">

        <div class="stat-item stat-score">
        <span id="scoreText">Score: 0</span>
      </div>

            <div class="stat-divider" id="hpStat">
                |
            </div>

            <div class="stat-item stat-hp" id="hpStat">
        <span id="hpText">HP: 0/0</span>
      </div>
            <div class="stat-divider" id="hpStat">
                |
            </div>
      <div class="stat-item stat-title">
        <a href="https://mkb0020.github.io">
              üê± CATastrophe2 üê±  <!-- CENTER LOGO -->
          </a>
      </div>
            <div class="stat-divider" id="hpStat">
                |
            </div>
            <div class="stat-item stat-lives">
        <span id="livesText">Lives: 3</span>
      </div>
                  <div class="stat-divider" id="hpStat">
                |
            </div>
      <div class="stat-item stat-time" id="timeStat">
        <span id="timeText">Time: 90s</span>
      </div>

</div>
      <div class="help-dropdown">
        <button class="help-icon" id="helpBtn"><div class="question-mark">?</div></button>
        <div class="dropdown-menu">
          <button id="openHelp">About This Player</button>
        </div>
      </div>
    </div>
  </nav>

<!--  <div class="hud-stats">
    <div class="hud-stats-inner">
      <div class="stat-item stat-score">
        <span class="stat-icon">‚≠ê</span>
        <span id="scoreText">Score: 0</span>
      </div>
      
      <div class="stat-item stat-hp" id="hpStat">
        <span class="stat-icon">üíñ</span>
        <span id="hpText">HP: 0/0</span>
      </div>
      
      <div class="stat-item stat-lives">
        <span class="stat-icon">üêæ</span>
        <span id="livesText">Lives: 3</span>
      </div>
      
      <div class="stat-item stat-time" id="timeStat">
        <span class="stat-icon">‚è±Ô∏è</span>
        <span id="timeText">Time: 90s</span>
      </div>
    </div>
  </div>-->



<div class="hero-content">
      <div class="canvas-container">
        <canvas id="gameCanvas" width="1000" height="480"></canvas>
      </div>
</div>

  <div class="debug-toggle" id="debugToggle" title="Toggle Debug Info">
    <img src="assets/images/settings.png" alt="Settings">
  </div>

  <div class="debug-info" id="debugInfo" style="display: none;">
    X: 0  Y: 0
  </div>


 
</div>

  <div id="helpModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title">üê± CATastrophe 2</h1>
        <button class="modal-close" id="closeModal">X</button>
      </div>
      <div class="modal-body">
        <blockquote>
          <p><em>"Nature has no reverence towards life. Nature treats life as though it were the most valueless thing in the world....<br>
          Nature does not act by purposes."</em><br>
          <cite>‚Äî Erwin Schr√∂dinger</cite></p>
        </blockquote>         
            <h3> Welcome to Schr√∂dinger's Cat Caf√©! </h3>
            <p>
                The caf√© is in a state of quantum catastrophe ‚Äî simultaneously fine and <em>very much not fine</em>. </p>
                <p>The vibe is off. And the sass levels are dangerously high. </p>
                <p><strong>Your mission:</strong> Stretch your toe beans, sharpen those claws. Grab the catnip. And help the cats collapse the wavefunction in the right direction and save the caf√© from becoming... unalive. </p>
            <h5>üéÆ How to Play</h5>
            <ul>
                <li><strong>Move Left / Right:</strong> Arrow Keys</li>
                <li><strong>Jump:</strong> SPACE</li>
                <li><strong>Pause & Audio Controls:</strong> Top‚Äëleft corner</li>
            </ul>
            <p>
                Your goal in each level is simple: platform your way through the caf√©, cause maximum cup‚Äërelated destruction, avoid (or stomp!) enemies, and reach the Cat Tower to finish the level.
            </p>
            <h5>Platformer Levels</h5>
            <h6> Items </h6>
            <ul>
                <li><strong>Knock Cups Off Platforms:</strong> Just run into them ‚Äî gravity does the rest!</li>
                <li><strong>Fish Bones:</strong> Extra points for your trouble.</li>
                <li><strong>Tuna Cans:</strong> Restores HP. Delicious and nutritious.</li>
                <li><strong>Milk Bottles:</strong> Grants an extra life. Calcium bonus!</li>
                <li><strong>Catnip:</strong> activate <em>zoomies</em> </li>
            </ul>
            <h6> Enemies </h6>
            <ul>
                <li><strong>Falling Cucumbers:</strong> The ancient feline nemesis. Avoid at all costs.</li>
                <li><strong>Lasers:</strong> They‚Äôre not for chasing ‚Äî dodge them!</li>
                <li><strong>Rats:</strong> You can stomp these squeaky foes for extra points.</li>
            </ul>
            <p>
               <!--Defeat <strong>7 rats</strong> and you‚Äôll earn a quantum upgrade:  
                <strong>+5 points</strong> to one stat of your choice ‚Äî <em>Attack</em>, <em>Defense</em>, or <em>Speed</em>.-->
            </p>
            <h6>Level Completion</h6>
            <p>
                Reach the <strong>Cat Tower</strong> at the end of each level and leap onto it to finish.  
            </p>
            <h5>‚öîÔ∏è Boss Battles ‚öîÔ∏è</h5>
            <p>
                When you reach a boss, the game shifts into a turn‚Äëbased showdown.  
                Choose your move, then the boss retaliates. Your <strong>Speed</strong> stat determines who acts first ‚Äî because even in quantum combat, fast paws win fights.
            </p>
            <ul>
                <li>Reduce the boss‚Äôs HP to <strong>0</strong> to win the battle.</li>
                <li>Stay strategic ‚Äî your stats matter!</li>
            </ul>
            <!--<h5>üîÆ Secrets & Collectibles</h5>
            <ul>
                <li><strong>The Three Neko States:</strong> Collect all three to unlock a special thing!</li>
            </ul>-->

        <p class="mission-text"><strong>Good luck, brave cat warrior!</strong><br>
        The fate of Schr√∂dinger's Cat Caf√© is now in your <em>toe beans</em>! üêæ</p>
      </div>
    </div>
  </div>

  <script type="module" src="modules/game.js"></script>   

  <script>
    let gameState = {
      score: 0,
      hp: 120,
      maxHP: 120,
      lives: 3,
      timeLeft: 90,
      playerX: 0,
      playerY: 0
    };
    const scoreText = document.getElementById('scoreText');
    const hpText = document.getElementById('hpText');
    const hpStat = document.getElementById('hpStat');
    const livesText = document.getElementById('livesText');
    const timeText = document.getElementById('timeText');
    const timeStat = document.getElementById('timeStat');

    const debugToggle = document.getElementById('debugToggle');
    const debugInfo = document.getElementById('debugInfo');
    let debugVisible = false;

    debugToggle.addEventListener('click', () => {
      debugVisible = !debugVisible;
      debugInfo.style.display = debugVisible ? 'block' : 'none';
      
      // Add active state to button
      if (debugVisible) {
        debugToggle.style.background = 'var(--AquaAura)';
        debugToggle.style.boxShadow = '0 0 20px var(--AquaAura)';
      } else {
        debugToggle.style.background = 'rgba(0, 0, 0, 0.8)';
        debugToggle.style.boxShadow = 'none';
      }
    });


  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const helpBtn = document.getElementById('helpBtn');
      const modal = document.getElementById('helpModal');
      const closeBtn = document.getElementById('closeModal');

      helpBtn.addEventListener('click', () => {
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; 
      });

    
      closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      });

      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.style.display === 'flex') {
          modal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      });
    });
  </script>
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  
  <script type="module">
  import { initializeModals } from './modules/helpers/kittyHelpers.js';
  initializeModals();
</script>

  <script>
        const starsDiv = document.getElementById('stars');
        for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = star.style.height = Math.random() * 2 + 'px';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 4 + 's';
            starsDiv.appendChild(star);
        }
  </script>
</body>
</html>